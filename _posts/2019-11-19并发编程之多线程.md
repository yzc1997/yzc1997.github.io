---
Java并发编程之线程
layout: post
date: 2019-11-19 16:08:16 
description: Java并发编程学习
tags: Java并发编程
---


#开篇之笔
想了很久，要怎么开始这一篇博客？是直奔主题讲什么是线程，要怎么做这样吗，最后还是用一段话来缓冲一下，接下来就进入主题了。

#线程与进程
- 什么是线程

线程是操作系统能够进行运算调度的最小单位。它被包含在进程之中，是进程中的实际运作单位。线程是依附于进程而存在的，每一个线程必须有父进程；线程拥有自己的堆栈、程序计数器和局部变量，线程和其他的线程共享进程的系统资源；进程不能共享内存，而线程之间可以轻松地共享内存。

- 什么是进程

进程是计算机中的程序关于某数据集合上的一次运行活动，是系统进行资源分配和调度的基本单位，是操作系统结构的基础。正在运行中的应用程序，通常称为进程。每个进程都有自己独立的地址空间(内存空间)，每当用户启动一个进程时，操作系统就会为该进程分配一个独立的内存空间，让应用程序在这个独立的内存空间中运行。

<img src="\images\posts\线程与进程.png" alt="线程与进程" style="zoom: 100%;" />

#为什么要使用线程

举个例子，你现在去饭店吃饭，你点了菜，假如你什么都不做，就在这等待上菜。这好比**单线程**执行程序（似乎有点蠢）。但是现实是你会在等待的时候去做别的事情，比如玩玩手机。这就好比**多线程**执行程序。

## 多线程的优点


- 避免阻塞，提高性能

单个线程中的程序，是顺序执行的。如果前面的操作发生了阻塞，那么就会影响到后面的操作。这时候可以采用多线程，异步调用，处理更多的业务，提高程序的响应能力。


- 充分利用cup的性能

单线程的情况下，处理器之处理一个线程，cup的性能不能得到充分的发挥。多线程可以充分利用这部分性能，处理更多的业务。

## 多线程的缺点

有利必有弊，多线程确实给程序带来很高的收益，但是同时会带来相应的问题

- 如果有大量的线程,会影响性能,因为操作系统需要在它们之间切换，切换线程需要时间，所以好合理的创建线程。


- 更多的线程意味需要使用更多的内存空间。

- 会带来线程安全问题，典型的就是“超卖”行为等。

- 线程的死锁。即较长时间的等待或资源竞争以及死锁等多线程症状。

可见多线程是一把双刃剑，我们要合理运用。

#多线程的使用

- Java创建线程有两种方法，继承**Thread**类和实现**Runnable**接口。

##继承Thread
可以以继承**Thread** 并重写其**run**()。其中**run**()方法就是线程需要执行的任务。然后调用start()方法来启动线程。实例代码

    public class MyThread extends Thread {
    
        /**
         * 线程执行的方法
         */
        @Override
        public void run() {
            for (int i = 0; i < 10; i++) {
                System.out.println("hello");
            }
        }
    
        public static void main(String[] args) {
            //创建线程
            MyThread myThread = new MyThread();
            //启动线程
            myThread.start();
            System.out.println("程序结束");
        }
    }
    
##实现**Runnable**接口

实例代码

    public class MyRunnable implements Runnable {
	    /**
	     * 线程执行的任务
	     */
	    @Override
	    public void run() {
	        for (int i = 0; i < 10; i++) {
	            System.out.println("hello");
	        }
	    }
	
	    public static void main(String[] args) {
	        //创建线程
	        Thread thread = new Thread(new MyRunnable());
	        //启动线程
	        thread.start();
	        System.out.println("程序结束");
	    }
	}

Runnable线程的启动需要通过Thread来启动

通过查看源码发现，其实**Thread**类其实也是实现了**Runnable**，但是怎么选择还是得看业务需求

##### 注意，start()方法是启动线程，而run()方法只是要执行的任务，调用run() 方法并不能启动线程 #####

#画龙点睛

本文只是简单说了一下线程和Java中使用线程的方法。多线程很好，使用不当可能适得其反，要善用线程。并发编程并不简单，我也在学习的路上，大家一起加油把。














